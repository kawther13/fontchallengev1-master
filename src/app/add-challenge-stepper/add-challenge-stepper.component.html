<!-- STEP BY STEP CHALLENGE CREATION -->
<div *ngIf="stepperVisible">
  <mat-horizontal-stepper [linear]="isLinear" #stepper>

    <!-- Ã‰tape 1 : CrÃ©er le challenge -->
    <mat-step>
      <ng-template matStepLabel>CrÃ©er Challenge</ng-template>
      <app-add-challengee (challengeCreated)="setChallengeId($event); stepper.next()"></app-add-challengee>
    </mat-step>

    <!-- Ã‰tape 2 : Ajouter Conditions -->
    <mat-step>
      <ng-template matStepLabel>Conditions</ng-template>
      <app-condition *ngIf="challengeId" [challengeId]="challengeId"></app-condition>
      <div class="mt-3">
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button matStepperNext>Suivant</button>
      </div>
    </mat-step>

    <!-- Ã‰tape 3 : Conditions de Gain -->
    <mat-step>
      <ng-template matStepLabel>Condition de Gain</ng-template>
      <app-condition-gain *ngIf="challengeId" [challengeId]="challengeId"></app-condition-gain>
      <div class="mt-3">
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button matStepperNext>Suivant</button>
      </div>
    </mat-step>

    <!-- Ã‰tape 4 : RÃ¨gles de Score -->
    <mat-step>
      <ng-template matStepLabel>RÃ¨gles de Score</ng-template>
      <app-score-rule *ngIf="challengeId" [challengeId]="challengeId"></app-score-rule>
      <div class="mt-3">
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button matStepperNext>Suivant</button>
      </div>
    </mat-step>

    <!-- Ã‰tape 5 : RÃ´le et Paliers -->
    <mat-step>
      <ng-template matStepLabel>Gains par RÃ´le</ng-template>
      <app-role-palier *ngIf="challengeId" [challengeId]="challengeId"></app-role-palier>
      <div class="mt-3">
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button (click)="finishStepper()">Terminer</button>
      </div>
    </mat-step>

  </mat-horizontal-stepper>
</div>

<!-- âœ… Message final -->
<div *ngIf="!stepperVisible" class="text-center mt-4">
  <h3 class="text-success">ğŸ‰ Challenge crÃ©Ã© avec succÃ¨s !</h3>
  
  <div class="mt-3 d-flex justify-content-center gap-3">
    <button mat-stroked-button color="primary" (click)="restart()">â• CrÃ©er un autre challenge</button>
    <button mat-stroked-button color="warn" (click)="annuler()">âŒ Annuler</button>
  </div>
</div>
