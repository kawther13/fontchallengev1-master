<div *ngIf="stepperVisible">
  <mat-horizontal-stepper [linear]="isLinear" #stepper>

    <!-- Étape 1 : Modifier Challenge -->
    <mat-step>
      <ng-template matStepLabel>Modifier Challenge</ng-template>
      <app-edit
  [challenge]="challenge"
  (challengeUpdated)="stepper.next()">
</app-edit>

    </mat-step>

    <!-- Étapes suivantes (réutilisables) -->
    <mat-step>
      <ng-template matStepLabel>Conditions</ng-template>
      <app-condition *ngIf="challengeId" [challengeId]="challengeId"></app-condition>
      <div class="mt-3">
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button matStepperNext>Suivant</button>
      </div>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Condition de Gain</ng-template>
      <app-condition-gain  *ngIf="challengeId" [challengeId]="challengeId"></app-condition-gain>
      <div class="mt-3">
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button matStepperNext>Suivant</button>
      </div>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Règles de Score</ng-template>
      <app-score-rule  *ngIf="challengeId" [challengeId]="challengeId"></app-score-rule>
      <div class="mt-3">
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button matStepperNext>Suivant</button>
      </div>
    </mat-step>

    <mat-step>
      <ng-template matStepLabel>Gains par Rôle</ng-template>
      <app-role-palier  *ngIf="challengeId" [challengeId]="challengeId"></app-role-palier>
      <div class="mt-3">
        <button mat-button matStepperPrevious>Retour</button>
        <button mat-button (click)="finishStepper()">Terminer</button>
      </div>
    </mat-step>

  </mat-horizontal-stepper>
</div>

<!-- ✅ Message de fin -->
<div *ngIf="!stepperVisible" class="text-center mt-4">
  <h3 class="text-success">🎉 Challenge mis à jour avec succès !</h3>

  <div class="mt-3 d-flex justify-content-center gap-3">
    <button mat-stroked-button color="primary" (click)="restart()">🔁 Modifier à nouveau</button>
    <button mat-stroked-button color="warn" (click)="annuler()">❌ Fermer</button>
  </div>
</div>

